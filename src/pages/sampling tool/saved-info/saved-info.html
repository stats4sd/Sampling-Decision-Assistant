<ion-header>
  <ion-navbar color="primary-inverted">
    <ion-title>Saved Projects</ion-title>
    <ion-buttons end>
      <button ion-button icon-left icon-right (click)="dismiss()">Close
        <ion-icon name="close"></ion-icon>
      </button>
    </ion-buttons>
  </ion-navbar>
</ion-header>
<ion-content padding>
  <div *ngIf="view=='save'">
    <h3>Create New Project</h3>
    <ion-list>
      <ion-item>
        <ion-input placeholder="Input a name for the project" [(ngModel)]="saveName"></ion-input>
      </ion-item>
      <div class="error-message">{{errorMsg}}</div>
      <div class="error-message">Future progress will be automatically saved</div>
      <ion-item>
        <button ion-button icon-left [disabled]="!saveName" (click)="createNew()">
          <ion-icon name="create"></ion-icon>Create</button>
      </ion-item>
    </ion-list>
  </div>
  <div *ngIf="view=='load'">
    <h3>Load saved project</h3>
    <ion-list>
      <ion-item *ngFor="let project of savedProjects$ | async">
        <div style="display: flex">
          <div style="flex:1; cursor:pointer" (click)="loadProject(project)">
            <div class="survey-title">{{project.title? project.title : 'untitiled'}}</div>
            <div class="survey-date">{{project.created | date}}</div>
          </div>
          <div style="margin:5px">
            <button ion-button icon-only clear (click)="deleteSurvey(survey)">
              <ion-icon name="trash" color="delete"></ion-icon>
            </button>
          </div>
        </div>
      </ion-item>
      <div *ngIf="savedArray.length==0">There are no projects saved. Click
        <span class="link" (click)="setView('save')">here</span> to create a new project</div>
    </ion-list>
    <h3>Load a project templates</h3>
    <ion-list>
      <div class="temp-text">Here you will be able load templates that have been precreated to facilitate the sampling decision processes</div>
    </ion-list>
    <h3>Import from excel</h3>
    <ion-list>
      <div class="temp-text">In this section you will be able import a previously-created excel file, for sharing projects with others or using
        on different devices</div>
      <file-drop headertext="Drop files here" (onFileDrop)="dropped($event)" (onFileOver)="fileOver($event)" (onFileLeave)="fileLeave($event)">
        <!-- <span>optional content (don't set headertext then)</span> -->
      </file-drop>
    </ion-list>
  </div>
</ion-content>